/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package performancetasks;


import java.awt.Point;
import javax.swing.Timer;

/**
 *
 * @author seany
 */
public class AdvancedCalculator extends javax.swing.JFrame {
    
    private static final java.util.logging.Logger logger = java.util.logging.Logger.getLogger(AdvancedCalculator.class.getName());
    
    // Calculator Mode Declarations
    private boolean isStandard = true;
    private boolean isScientific = false;
    
    // Sidebar Declarations
    private static final int SIDEBAR_PANEL_MAX_WIDTH = 250;
    private static final int ANIMATION_DURATION = 50;
    private static final int ANIMATION_STEP_TIME = 10;
    
    private boolean isSidebarAnimating = false;
    private boolean isSidebarExpanded = false;
    /**
     * Creates new form AdvancedCalculator
     */
    public AdvancedCalculator() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        mainPanel = new javax.swing.JPanel();
        sidebarPanel = new javax.swing.JPanel();
        collapseSidebar = new javax.swing.JLabel();
        scientificCalculatorButton = new javax.swing.JLabel();
        standardCalculatorButton = new javax.swing.JLabel();
        expandSidebar = new javax.swing.JLabel();
        StandardPanel = new javax.swing.JPanel();
        standardDisplayPanel = new javax.swing.JPanel();
        standardButtonsPanel = new javax.swing.JPanel();
        ScientificPanel = new javax.swing.JPanel();
        scientificDisplayPanel = new javax.swing.JPanel();
        scientificButtonsPanel = new javax.swing.JPanel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Calculator");

        mainPanel.setBackground(new java.awt.Color(51, 51, 51));
        mainPanel.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                mainPanelMouseClicked(evt);
            }
        });
        mainPanel.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        sidebarPanel.setBackground(new java.awt.Color(255, 102, 102));
        sidebarPanel.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        collapseSidebar.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        collapseSidebar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/performancetasks/imgs/Segoe-MDL2-Assets-Regular-Global.png"))); // NOI18N
        collapseSidebar.setToolTipText("");
        collapseSidebar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        collapseSidebar.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                collapseSidebarMouseClicked(evt);
            }
        });
        sidebarPanel.add(collapseSidebar, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, -1, 30));

        scientificCalculatorButton.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        scientificCalculatorButton.setText("Scientific");
        scientificCalculatorButton.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        scientificCalculatorButton.setOpaque(true);
        scientificCalculatorButton.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                scientificCalculatorButtonMouseClicked(evt);
            }
        });
        sidebarPanel.add(scientificCalculatorButton, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 130, 250, 40));

        standardCalculatorButton.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        standardCalculatorButton.setText("Standard");
        standardCalculatorButton.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        standardCalculatorButton.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                standardCalculatorButtonMouseClicked(evt);
            }
        });
        sidebarPanel.add(standardCalculatorButton, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 90, 250, 40));

        mainPanel.add(sidebarPanel, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 0, 530));

        expandSidebar.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        expandSidebar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/performancetasks/imgs/Segoe-MDL2-Assets-Regular-Global.png"))); // NOI18N
        expandSidebar.setToolTipText("");
        expandSidebar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        expandSidebar.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                expandSidebarMouseClicked(evt);
            }
        });
        mainPanel.add(expandSidebar, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, -1, 30));

        StandardPanel.setBackground(new java.awt.Color(255, 204, 204));
        StandardPanel.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        standardDisplayPanel.setBackground(new java.awt.Color(153, 153, 153));

        javax.swing.GroupLayout standardDisplayPanelLayout = new javax.swing.GroupLayout(standardDisplayPanel);
        standardDisplayPanel.setLayout(standardDisplayPanelLayout);
        standardDisplayPanelLayout.setHorizontalGroup(
            standardDisplayPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 340, Short.MAX_VALUE)
        );
        standardDisplayPanelLayout.setVerticalGroup(
            standardDisplayPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 180, Short.MAX_VALUE)
        );

        StandardPanel.add(standardDisplayPanel, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 340, 180));

        standardButtonsPanel.setBackground(new java.awt.Color(0, 0, 0));

        javax.swing.GroupLayout standardButtonsPanelLayout = new javax.swing.GroupLayout(standardButtonsPanel);
        standardButtonsPanel.setLayout(standardButtonsPanelLayout);
        standardButtonsPanelLayout.setHorizontalGroup(
            standardButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 340, Short.MAX_VALUE)
        );
        standardButtonsPanelLayout.setVerticalGroup(
            standardButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 350, Short.MAX_VALUE)
        );

        StandardPanel.add(standardButtonsPanel, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 180, 340, 350));

        mainPanel.add(StandardPanel, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 340, 530));

        ScientificPanel.setBackground(new java.awt.Color(51, 255, 204));
        ScientificPanel.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        scientificDisplayPanel.setBackground(new java.awt.Color(0, 153, 153));

        javax.swing.GroupLayout scientificDisplayPanelLayout = new javax.swing.GroupLayout(scientificDisplayPanel);
        scientificDisplayPanel.setLayout(scientificDisplayPanelLayout);
        scientificDisplayPanelLayout.setHorizontalGroup(
            scientificDisplayPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 340, Short.MAX_VALUE)
        );
        scientificDisplayPanelLayout.setVerticalGroup(
            scientificDisplayPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 180, Short.MAX_VALUE)
        );

        ScientificPanel.add(scientificDisplayPanel, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 340, 180));

        scientificButtonsPanel.setBackground(new java.awt.Color(0, 204, 153));

        javax.swing.GroupLayout scientificButtonsPanelLayout = new javax.swing.GroupLayout(scientificButtonsPanel);
        scientificButtonsPanel.setLayout(scientificButtonsPanelLayout);
        scientificButtonsPanelLayout.setHorizontalGroup(
            scientificButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 340, Short.MAX_VALUE)
        );
        scientificButtonsPanelLayout.setVerticalGroup(
            scientificButtonsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 350, Short.MAX_VALUE)
        );

        ScientificPanel.add(scientificButtonsPanel, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 180, 340, 350));

        mainPanel.add(ScientificPanel, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 340, 530));

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(mainPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(mainPanel, javax.swing.GroupLayout.PREFERRED_SIZE, 530, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private Timer animationTimer;
    private void toggleSidebar(){
        // Prevent multiple toggles at once
        if (animationTimer != null && animationTimer.isRunning()) return;

        int startWidth = sidebarPanel.getWidth();
        int endWidth = isSidebarExpanded ? 0 : SIDEBAR_PANEL_MAX_WIDTH;
        int totalSteps = ANIMATION_DURATION / ANIMATION_STEP_TIME;
        int widthStep = (endWidth - startWidth) / totalSteps;

        animationTimer = new Timer(ANIMATION_STEP_TIME, null);
        final int[] currentStep = {0};

        animationTimer.addActionListener(e -> {
            if (currentStep[0] >= totalSteps) {
                // Ensure final size is set
                sidebarPanel.setSize(endWidth, sidebarPanel.getHeight());
                isSidebarExpanded = !isSidebarExpanded; // Toggle state
                animationTimer.stop();
                isSidebarAnimating = false;
            } else {
                int newWidth = sidebarPanel.getWidth() + widthStep;
                sidebarPanel.setSize(newWidth, sidebarPanel.getHeight());
                currentStep[0]++;
            }
        });

        isSidebarAnimating = true;
        animationTimer.start();
    }
    
    private void collapseSidebarMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_collapseSidebarMouseClicked
        toggleSidebar();
    }//GEN-LAST:event_collapseSidebarMouseClicked

    private void expandSidebarMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_expandSidebarMouseClicked
        toggleSidebar();
    }//GEN-LAST:event_expandSidebarMouseClicked

    private void mainPanelMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_mainPanelMouseClicked
        Point clickPoint = evt.getPoint();
        int sidebarWidth = 250;
        
        if (isSidebarExpanded && !isSidebarAnimating && clickPoint.x > sidebarWidth) {
            toggleSidebar();
        }
    }//GEN-LAST:event_mainPanelMouseClicked
    
    private void scientificCalculatorButtonMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_scientificCalculatorButtonMouseClicked
        if (isStandard && !isScientific){
            ScientificPanel.setVisible(true);
            StandardPanel.setVisible(false);
            toggleSidebar();
            isScientific = true;
            isStandard = false;
        }
    }//GEN-LAST:event_scientificCalculatorButtonMouseClicked

    private void standardCalculatorButtonMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_standardCalculatorButtonMouseClicked
        if(isScientific && !isStandard){
            ScientificPanel.setVisible(false);
            StandardPanel.setVisible(true);
            toggleSidebar();
            isStandard = true;
            isScientific = false;
        }
    }//GEN-LAST:event_standardCalculatorButtonMouseClicked

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Windows".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ReflectiveOperationException | javax.swing.UnsupportedLookAndFeelException ex) {
            logger.log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(() -> new AdvancedCalculator().setVisible(true));
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel ScientificPanel;
    private javax.swing.JPanel StandardPanel;
    private javax.swing.JLabel collapseSidebar;
    private javax.swing.JLabel expandSidebar;
    private javax.swing.JPanel mainPanel;
    private javax.swing.JPanel scientificButtonsPanel;
    private javax.swing.JLabel scientificCalculatorButton;
    private javax.swing.JPanel scientificDisplayPanel;
    private javax.swing.JPanel sidebarPanel;
    private javax.swing.JPanel standardButtonsPanel;
    private javax.swing.JLabel standardCalculatorButton;
    private javax.swing.JPanel standardDisplayPanel;
    // End of variables declaration//GEN-END:variables
}
